"use strict";!function(e){e.extend(e,{getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);if(null!==n){var o=n[2];return o=o.replace(/(%22|%3E|%3C|<|>)/g,"MM"),""===o?null:decodeURIComponent(o)}return null},touchEvent:function(){function t(e,t){""===t?e.on(c,n):e.on(c,t,n)}function n(t){var n=t.touches?t.touches[0]:t,i=n.clientX,c=n.clientY,s=!1,g=this,f=setTimeout(function(){s||e(g).addClass("active")},80);e(this).on(r,function(t){var n=t.touches?t.touches[0]:t,r=n.clientX,u=n.clientY;i===r&&c===u||(clearTimeout(f),s=!0,e(g).removeClass("active"),o(g))}),e(this).on(u,function(){clearTimeout(f),s||(e(g).removeClass("active"),l.call(g,t)),o(g)}),e(this).on(a,function(){clearTimeout(f),e(g).removeClass("active"),o(g)})}function o(t){e(t).off(r),e(t).off(u),e(t).off(a)}var i="ontouchstart"in window,c=i?"touchstart":"mousedown",r=i?"touchmove":"mousemove",u=i?"touchend":"mouseup",a=i?"touchcancel":"mouseup";if(2==arguments.length){var s=arguments[0],l=arguments[1];t(s,"")}else if(3==arguments.length){var s=arguments[0],g=arguments[1],l=arguments[2];t(s,g)}},cookie:{getCookie:function(e){var t=new RegExp("(?:^"+e+"|;\\s*"+e+")=(.*?)(?:;|$)","g"),n=t.exec(document.cookie);return null===n?null:unescape(n[1])},setCookie:function(e,t,n,o,i){var c=e+"="+escape(t)+";";n&&n instanceof Date&&(c+="expires="+n.toGMTString()+";"),o=o?o:"/",c+="path="+o+";",i&&(c+="domain="+i+";"),document.cookie=c},delCookie:function(e,t,n,o){if(this.getCookie(e)){var i=new Date;i.setTime(i.getTime()+-1e4),n=n?n:"",t=t?t:"/";var c=escape(e)+"="+escape("")+(i?"; expires="+i.toGMTString():"")+"; path="+t+(n?"; domain="+n:"")+(o?"; secure":"");document.cookie=c}}},getVersion:function(){var t="",n=e.Deferred();return beacon.getAccountInfo({},function(e){var o=decodeURIComponent(e.DUA),i=new RegExp("(^|&)VN=([^&]*)(&|$)","i"),c=o.match(i);null!=c?(t=c[2],t=t.substr(0,3)):t=null,n.resolve(t)}),n.promise()},isIOS:function(){var e=navigator.userAgent;return!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},mobileConsole:function(e){console.log(e)},output:function(e){},toLocaleFormat:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},isElementNotInViewport:function(e){var t=!0,n=e.getBoundingClientRect();return n.top+n.height<0&&(t=!1),n.bottom-n.height>document.body.clientHeight&&(t=!1),n.left+n.width<0&&(t=!1),n.right-n.width>document.body.clientWidth&&(t=!1),!t},weixinSDKRegister:function(t){if("undefined"!=typeof wx&&("web"===e.getQueryString("dt_from")||"nod"===e.getQueryString("dt_from"))){var n=location.href,o={url:e.getAjaxHost("common")+"getWxConfig",data:{action:"JsConfig",shareUrl:encodeURIComponent(n)},success:function(n){if(""!=n.content){var o=JSON.parse(n.content);wx.config({debug:!1,appId:o.sAppID,timestamp:o.lTimeStamp,nonceStr:o.sNonceStr,signature:o.sSignature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]});var i={title:"会牛-SIRI",desc:"会牛-SIRI",imgUrl:"",link:location.href,type:"link",dataUrl:""};e.extend(i,t),wx.ready(function(){wx.onMenuShareTimeline({title:i.title,link:i.link,imgUrl:i.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:i.title,desc:i.desc,link:i.link,imgUrl:i.imgUrl,type:i.type,dataUrl:i.dataUrl,success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:i.title,desc:i.desc,link:i.link,imgUrl:i.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(e){})}},error:function(e){}};e.getData(o)}}})}(Zepto);